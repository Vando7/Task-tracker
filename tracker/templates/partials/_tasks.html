{% if floor_id %}
<div id="floor_id_holder" floor_id="{{floor_id}}"></div>
{% endif %}

{% if room_id %}
<div id="room_id_holder" room_id="{{room_id}}"></div>
{% endif %}

<!-- placeholder for dynamically loaded tasks -->
<div id="tasks" class="container">
    <div class="row" id="pending_tasks_holder"></div>
    <div class="row" id="done_tasks_holder"></div>
</div>

<div id="tasks" class="container">
    <div class="row" id="pending_tasks_holder">
        <div class="col-lg-4 col-md-6 col-sm-12">
            <div class="card mb-3 shadow">
                <div class="card-header">
                    <span class="task-name" contenteditable="true">Lorem ipsum dolor sit amet, consectetur adipiscing
                        elit. Vestibulum facilisis dui in magna cursus, ut facilisis sem dapibus nam.</span>
                </div>
                <div class="card-body collapse show">
                    <div class="task-field-container">
                        <span class="task-description task-field" contenteditable="true" data-task-id="0"
                            data-field-name="task_description">Lorem ipsum dolor sit amet, consectetur adipiscing elit.
                            Suspendisse quis condimentum purus. Vivamus vulputate eu purus et porta. Nam eros mi,
                            consectetur id pretium id, pharetra vitae quam. Donec finibus libero magna, eget finibus ex
                            malesuada in. Praesent sed sagittis mauris. Vestibulum ultricies nisl vitae malesuada
                            sagittis. Sed urna sapien, tempus rutrum consectetur elementum, luctus a elit. Suspendisse
                            aliquet justo lorem, in faucibus leo tempor eget. Etiam fringilla sagittis ante ac
                            pellentesque nam.</span>
                    </div>

                    <div class="task-field-container">
                        <p class="task-status-label task-label">Status: </p>
                        <span class="task-status-value task-field" contenteditable="true" data-task-id="0"
                            data-field-name="task_status">sth</span>
                    </div>

                    <div class="task-field-container">
                        <div class="task-type-label task-label">Type: </div>
                        <span class="task-type-value task-field" contenteditable="true" data-task-id="0"
                            data-field-name="task_type">haha</span>
                    </div>

                    <div class="task-field-container">
                        <div class="task-category-label task-label">Category: </div>
                        <span class="task-category-value task-field" contenteditable="true" data-task-id="0"
                            data-field-name="task_category">single</span>
                    </div>

                    <div class="ttask-field-container">
                        <div class="task-due-date-label task-label">Due date: </div>
                        <span class="task-due-date-value task-field" contenteditable="true" data-task-id="0"
                            data-field-name="task_due_date">due date</span>
                    </div>

                    <div class="task-field-container">
                        <div class="task-creation-date-label task-label">Creation date: </div>
                        <span class="task-creation-date-value task-field" contenteditable="true" data-task-id="0"
                            data-field-name="task_creation_date"> due date</span>
                    </div>

                    <div class="task-field-container">
                        <div class="task-modified-date-label task-label">Modified date: </div>
                        <span class="task-modified-date-value task-field" contenteditable="true" data-task-id="0"
                            data-field-name="task_modified_date"> due date</span>
                    </div>

                    <div class="task-field-container">
                        <div class="task-completed-date-label task-label">Completed date: </div>
                        <span class="task-completed-date-value task-field" contenteditable="true" data-task-id="0"
                            data-field-name="task_completed_date"> asd</span>
                    </div>

                    <div class="task-field-container">
                        <div class="task-rooms-label task-label">Rooms: </div>
                        <span class="task-rooms-value task-field" contenteditable="true" data-task-id="0"
                            data-field-name="task_rooms">idk</span>
                    </div>
                </div>
            </div>
        </div><div class="col-lg-4 col-md-6 col-sm-12">
            <div class="card mb-3 shadow">
                <div class="card-header">
                    <span class="task-name" contenteditable="true">Lorem ipsum dolor sit amet, consectetur adipiscing
                        elit. Vestibulum facilisis dui in magna cursus, ut facilisis sem dapibus nam.</span>
                </div>
                <div class="card-body collapse show">
                    <div class="task-field-container">
                        <span class="task-description task-field" contenteditable="true" data-task-id="0"
                            data-field-name="task_description">Lorem ipsum dolor sit amet, consectetur adipiscing elit.
                            Suspendisse quis condimentum purus. Vivamus vulputate eu purus et porta. Nam eros mi,
                            consectetur id pretium id, pharetra vitae quam. Donec finibus libero magna, eget finibus ex
                            malesuada in. Praesent sed sagittis mauris. Vestibulum ultricies nisl vitae malesuada
                            sagittis. Sed urna sapien, tempus rutrum consectetur elementum, luctus a elit. Suspendisse
                            aliquet justo lorem, in faucibus leo tempor eget. Etiam fringilla sagittis ante ac
                            pellentesque nam.</span>
                    </div>

                    <div class="task-field-container">
                        <p class="task-status-label task-label">Status: </p>
                        <span class="task-status-value task-field" contenteditable="true" data-task-id="0"
                            data-field-name="task_status">sth</span>
                    </div>

                    <div class="task-field-container">
                        <div class="task-type-label task-label">Type: </div>
                        <span class="task-type-value task-field" contenteditable="true" data-task-id="0"
                            data-field-name="task_type">haha</span>
                    </div>

                    <div class="task-field-container">
                        <div class="task-category-label task-label">Category: </div>
                        <span class="task-category-value task-field" contenteditable="true" data-task-id="0"
                            data-field-name="task_category">single</span>
                    </div>

                    <div class="ttask-field-container">
                        <div class="task-due-date-label task-label">Due date: </div>
                        <span class="task-due-date-value task-field" contenteditable="true" data-task-id="0"
                            data-field-name="task_due_date">due date</span>
                    </div>

                    <div class="task-field-container">
                        <div class="task-creation-date-label task-label">Creation date: </div>
                        <span class="task-creation-date-value task-field" contenteditable="true" data-task-id="0"
                            data-field-name="task_creation_date"> due date</span>
                    </div>

                    <div class="task-field-container">
                        <div class="task-modified-date-label task-label">Modified date: </div>
                        <span class="task-modified-date-value task-field" contenteditable="true" data-task-id="0"
                            data-field-name="task_modified_date"> due date</span>
                    </div>

                    <div class="task-field-container">
                        <div class="task-completed-date-label task-label">Completed date: </div>
                        <span class="task-completed-date-value task-field" contenteditable="true" data-task-id="0"
                            data-field-name="task_completed_date"> asd</span>
                    </div>

                    <div class="task-field-container">
                        <div class="task-rooms-label task-label">Rooms: </div>
                        <span class="task-rooms-value task-field" contenteditable="true" data-task-id="0"
                            data-field-name="task_rooms">idk</span>
                    </div>
                </div>
            </div>
        </div><div class="col-lg-4 col-md-6 col-sm-12">
            <div class="card mb-3 shadow">
                <div class="card-header">
                    <span class="task-name" contenteditable="true">Lorem ipsum dolor sit amet, consectetur adipiscing
                        elit. Vestibulum facilisis dui in magna cursus, ut facilisis sem dapibus nam.</span>
                </div>
                <div class="card-body collapse show">
                    <div class="task-field-container">
                        <span class="task-description task-field" contenteditable="true" data-task-id="0"
                            data-field-name="task_description">Lorem ipsum dolor sit amet, consectetur adipiscing elit.
                            Suspendisse quis condimentum purus. Vivamus vulputate eu purus et porta. Nam eros mi,
                            consectetur id pretium id, pharetra vitae quam. Donec finibus libero magna, eget finibus ex
                            malesuada in. Praesent sed sagittis mauris. Vestibulum ultricies nisl vitae malesuada
                            sagittis. Sed urna sapien, tempus rutrum consectetur elementum, luctus a elit. Suspendisse
                            aliquet justo lorem, in faucibus leo tempor eget. Etiam fringilla sagittis ante ac
                            pellentesque nam.</span>
                    </div>

                    <div class="task-field-container">
                        <p class="task-status-label task-label">Status: </p>
                        <span class="task-status-value task-field" contenteditable="true" data-task-id="0"
                            data-field-name="task_status">sth</span>
                    </div>

                    <div class="task-field-container">
                        <div class="task-type-label task-label">Type: </div>
                        <span class="task-type-value task-field" contenteditable="true" data-task-id="0"
                            data-field-name="task_type">haha</span>
                    </div>

                    <div class="task-field-container">
                        <div class="task-category-label task-label">Category: </div>
                        <span class="task-category-value task-field" contenteditable="true" data-task-id="0"
                            data-field-name="task_category">single</span>
                    </div>

                    <div class="ttask-field-container">
                        <div class="task-due-date-label task-label">Due date: </div>
                        <span class="task-due-date-value task-field" contenteditable="true" data-task-id="0"
                            data-field-name="task_due_date">due date</span>
                    </div>

                    <div class="task-field-container">
                        <div class="task-creation-date-label task-label">Creation date: </div>
                        <span class="task-creation-date-value task-field" contenteditable="true" data-task-id="0"
                            data-field-name="task_creation_date"> due date</span>
                    </div>

                    <div class="task-field-container">
                        <div class="task-modified-date-label task-label">Modified date: </div>
                        <span class="task-modified-date-value task-field" contenteditable="true" data-task-id="0"
                            data-field-name="task_modified_date"> due date</span>
                    </div>

                    <div class="task-field-container">
                        <div class="task-completed-date-label task-label">Completed date: </div>
                        <span class="task-completed-date-value task-field" contenteditable="true" data-task-id="0"
                            data-field-name="task_completed_date"> asd</span>
                    </div>

                    <div class="task-field-container">
                        <div class="task-rooms-label task-label">Rooms: </div>
                        <span class="task-rooms-value task-field" contenteditable="true" data-task-id="0"
                            data-field-name="task_rooms">idk</span>
                    </div>
                </div>
            </div>
        </div><div class="col-lg-4 col-md-6 col-sm-12">
            <div class="card mb-3 shadow">
                <div class="card-header">
                    <span class="task-name" contenteditable="true">Lorem ipsum dolor sit amet, consectetur adipiscing
                        elit. Vestibulum facilisis dui in magna cursus, ut facilisis sem dapibus nam.</span>
                </div>
                <div class="card-body collapse show">
                    <div class="task-field-container">
                        <span class="task-description task-field" contenteditable="true" data-task-id="0"
                            data-field-name="task_description">Lorem ipsum dolor sit amet, consectetur adipiscing elit.
                            Suspendisse quis condimentum purus. Vivamus vulputate eu purus et porta. Nam eros mi,
                            consectetur id pretium id, pharetra vitae quam. Donec finibus libero magna, eget finibus ex
                            malesuada in. Praesent sed sagittis mauris. Vestibulum ultricies nisl vitae malesuada
                            sagittis. Sed urna sapien, tempus rutrum consectetur elementum, luctus a elit. Suspendisse
                            aliquet justo lorem, in faucibus leo tempor eget. Etiam fringilla sagittis ante ac
                            pellentesque nam.</span>
                    </div>

                    <div class="task-field-container">
                        <p class="task-status-label task-label">Status: </p>
                        <span class="task-status-value task-field" contenteditable="true" data-task-id="0"
                            data-field-name="task_status">sth</span>
                    </div>

                    <div class="task-field-container">
                        <div class="task-type-label task-label">Type: </div>
                        <span class="task-type-value task-field" contenteditable="true" data-task-id="0"
                            data-field-name="task_type">haha</span>
                    </div>

                    <div class="task-field-container">
                        <div class="task-category-label task-label">Category: </div>
                        <span class="task-category-value task-field" contenteditable="true" data-task-id="0"
                            data-field-name="task_category">single</span>
                    </div>

                    <div class="ttask-field-container">
                        <div class="task-due-date-label task-label">Due date: </div>
                        <span class="task-due-date-value task-field" contenteditable="true" data-task-id="0"
                            data-field-name="task_due_date">due date</span>
                    </div>

                    <div class="task-field-container">
                        <div class="task-creation-date-label task-label">Creation date: </div>
                        <span class="task-creation-date-value task-field" contenteditable="true" data-task-id="0"
                            data-field-name="task_creation_date"> due date</span>
                    </div>

                    <div class="task-field-container">
                        <div class="task-modified-date-label task-label">Modified date: </div>
                        <span class="task-modified-date-value task-field" contenteditable="true" data-task-id="0"
                            data-field-name="task_modified_date"> due date</span>
                    </div>

                    <div class="task-field-container">
                        <div class="task-completed-date-label task-label">Completed date: </div>
                        <span class="task-completed-date-value task-field" contenteditable="true" data-task-id="0"
                            data-field-name="task_completed_date"> asd</span>
                    </div>

                    <div class="task-field-container">
                        <div class="task-rooms-label task-label">Rooms: </div>
                        <span class="task-rooms-value task-field" contenteditable="true" data-task-id="0"
                            data-field-name="task_rooms">idk</span>
                    </div>
                </div>
            </div>
        </div><div class="col-lg-4 col-md-6 col-sm-12">
            <div class="card mb-3 shadow">
                <div class="card-header">
                    <span class="task-name" contenteditable="true">Lorem ipsum dolor sit amet, consectetur adipiscing
                        elit. Vestibulum facilisis dui in magna cursus, ut facilisis sem dapibus nam.</span>
                </div>
                <div class="card-body collapse show">
                    <div class="task-field-container">
                        <span class="task-description task-field" contenteditable="true" data-task-id="0"
                            data-field-name="task_description">Lorem ipsum dolor sit amet, consectetur adipiscing elit.
                            Suspendisse quis condimentum purus. Vivamus vulputate eu purus et porta. Nam eros mi,
                            consectetur id pretium id, pharetra vitae quam. Donec finibus libero magna, eget finibus ex
                            malesuada in. Praesent sed sagittis mauris. Vestibulum ultricies nisl vitae malesuada
                            sagittis. Sed urna sapien, tempus rutrum consectetur elementum, luctus a elit. Suspendisse
                            aliquet justo lorem, in faucibus leo tempor eget. Etiam fringilla sagittis ante ac
                            pellentesque nam.</span>
                    </div>

                    <div class="task-field-container">
                        <p class="task-status-label task-label">Status: </p>
                        <span class="task-status-value task-field" contenteditable="true" data-task-id="0"
                            data-field-name="task_status">sth</span>
                    </div>

                    <div class="task-field-container">
                        <div class="task-type-label task-label">Type: </div>
                        <span class="task-type-value task-field" contenteditable="true" data-task-id="0"
                            data-field-name="task_type">haha</span>
                    </div>

                    <div class="task-field-container">
                        <div class="task-category-label task-label">Category: </div>
                        <span class="task-category-value task-field" contenteditable="true" data-task-id="0"
                            data-field-name="task_category">single</span>
                    </div>

                    <div class="ttask-field-container">
                        <div class="task-due-date-label task-label">Due date: </div>
                        <span class="task-due-date-value task-field" contenteditable="true" data-task-id="0"
                            data-field-name="task_due_date">due date</span>
                    </div>

                    <div class="task-field-container">
                        <div class="task-creation-date-label task-label">Creation date: </div>
                        <span class="task-creation-date-value task-field" contenteditable="true" data-task-id="0"
                            data-field-name="task_creation_date"> due date</span>
                    </div>

                    <div class="task-field-container">
                        <div class="task-modified-date-label task-label">Modified date: </div>
                        <span class="task-modified-date-value task-field" contenteditable="true" data-task-id="0"
                            data-field-name="task_modified_date"> due date</span>
                    </div>

                    <div class="task-field-container">
                        <div class="task-completed-date-label task-label">Completed date: </div>
                        <span class="task-completed-date-value task-field" contenteditable="true" data-task-id="0"
                            data-field-name="task_completed_date"> asd</span>
                    </div>

                    <div class="task-field-container">
                        <div class="task-rooms-label task-label">Rooms: </div>
                        <span class="task-rooms-value task-field" contenteditable="true" data-task-id="0"
                            data-field-name="task_rooms">idk</span>
                    </div>
                </div>
            </div>
        </div><div class="col-lg-4 col-md-6 col-sm-12">
            <div class="card mb-3 shadow">
                <div class="card-header">
                    <span class="task-name" contenteditable="true">Lorem ipsum dolor sit amet, consectetur adipiscing
                        elit. Vestibulum facilisis dui in magna cursus, ut facilisis sem dapibus nam.</span>
                </div>
                <div class="card-body collapse show">
                    <div class="task-field-container">
                        <span class="task-description task-field" contenteditable="true" data-task-id="0"
                            data-field-name="task_description">Lorem ipsum dolor sit amet, consectetur adipiscing elit.
                            Suspendisse quis condimentum purus. Vivamus vulputate eu purus et porta. Nam eros mi,
                            consectetur id pretium id, pharetra vitae quam. Donec finibus libero magna, eget finibus ex
                            malesuada in. Praesent sed sagittis mauris. Vestibulum ultricies nisl vitae malesuada
                            sagittis. Sed urna sapien, tempus rutrum consectetur elementum, luctus a elit. Suspendisse
                            aliquet justo lorem, in faucibus leo tempor eget. Etiam fringilla sagittis ante ac
                            pellentesque nam.</span>
                    </div>

                    <div class="task-field-container">
                        <p class="task-status-label task-label">Status: </p>
                        <span class="task-status-value task-field" contenteditable="true" data-task-id="0"
                            data-field-name="task_status">sth</span>
                    </div>

                    <div class="task-field-container">
                        <div class="task-type-label task-label">Type: </div>
                        <span class="task-type-value task-field" contenteditable="true" data-task-id="0"
                            data-field-name="task_type">haha</span>
                    </div>

                    <div class="task-field-container">
                        <div class="task-category-label task-label">Category: </div>
                        <span class="task-category-value task-field" contenteditable="true" data-task-id="0"
                            data-field-name="task_category">single</span>
                    </div>

                    <div class="ttask-field-container">
                        <div class="task-due-date-label task-label">Due date: </div>
                        <span class="task-due-date-value task-field" contenteditable="true" data-task-id="0"
                            data-field-name="task_due_date">due date</span>
                    </div>

                    <div class="task-field-container">
                        <div class="task-creation-date-label task-label">Creation date: </div>
                        <span class="task-creation-date-value task-field" contenteditable="true" data-task-id="0"
                            data-field-name="task_creation_date"> due date</span>
                    </div>

                    <div class="task-field-container">
                        <div class="task-modified-date-label task-label">Modified date: </div>
                        <span class="task-modified-date-value task-field" contenteditable="true" data-task-id="0"
                            data-field-name="task_modified_date"> due date</span>
                    </div>

                    <div class="task-field-container">
                        <div class="task-completed-date-label task-label">Completed date: </div>
                        <span class="task-completed-date-value task-field" contenteditable="true" data-task-id="0"
                            data-field-name="task_completed_date"> asd</span>
                    </div>

                    <div class="task-field-container">
                        <div class="task-rooms-label task-label">Rooms: </div>
                        <span class="task-rooms-value task-field" contenteditable="true" data-task-id="0"
                            data-field-name="task_rooms">idk</span>
                    </div>
                </div>
            </div>
        </div><div class="col-lg-4 col-md-6 col-sm-12">
            <div class="card mb-3 shadow">
                <div class="card-header">
                    <span class="task-name" contenteditable="true">Lorem ipsum dolor sit amet, consectetur adipiscing
                        elit. Vestibulum facilisis dui in magna cursus, ut facilisis sem dapibus nam.</span>
                </div>
                <div class="card-body collapse show">
                    <div class="task-field-container">
                        <span class="task-description task-field" contenteditable="true" data-task-id="0"
                            data-field-name="task_description">Lorem ipsum dolor sit amet, consectetur adipiscing elit.
                            Suspendisse quis condimentum purus. Vivamus vulputate eu purus et porta. Nam eros mi,
                            consectetur id pretium id, pharetra vitae quam. Donec finibus libero magna, eget finibus ex
                            malesuada in. Praesent sed sagittis mauris. Vestibulum ultricies nisl vitae malesuada
                            sagittis. Sed urna sapien, tempus rutrum consectetur elementum, luctus a elit. Suspendisse
                            aliquet justo lorem, in faucibus leo tempor eget. Etiam fringilla sagittis ante ac
                            pellentesque nam.</span>
                    </div>

                    <div class="task-field-container">
                        <p class="task-status-label task-label">Status: </p>
                        <span class="task-status-value task-field" contenteditable="true" data-task-id="0"
                            data-field-name="task_status">sth</span>
                    </div>

                    <div class="task-field-container">
                        <div class="task-type-label task-label">Type: </div>
                        <span class="task-type-value task-field" contenteditable="true" data-task-id="0"
                            data-field-name="task_type">haha</span>
                    </div>

                    <div class="task-field-container">
                        <div class="task-category-label task-label">Category: </div>
                        <span class="task-category-value task-field" contenteditable="true" data-task-id="0"
                            data-field-name="task_category">single</span>
                    </div>

                    <div class="ttask-field-container">
                        <div class="task-due-date-label task-label">Due date: </div>
                        <span class="task-due-date-value task-field" contenteditable="true" data-task-id="0"
                            data-field-name="task_due_date">due date</span>
                    </div>

                    <div class="task-field-container">
                        <div class="task-creation-date-label task-label">Creation date: </div>
                        <span class="task-creation-date-value task-field" contenteditable="true" data-task-id="0"
                            data-field-name="task_creation_date"> due date</span>
                    </div>

                    <div class="task-field-container">
                        <div class="task-modified-date-label task-label">Modified date: </div>
                        <span class="task-modified-date-value task-field" contenteditable="true" data-task-id="0"
                            data-field-name="task_modified_date"> due date</span>
                    </div>

                    <div class="task-field-container">
                        <div class="task-completed-date-label task-label">Completed date: </div>
                        <span class="task-completed-date-value task-field" contenteditable="true" data-task-id="0"
                            data-field-name="task_completed_date"> asd</span>
                    </div>

                    <div class="task-field-container">
                        <div class="task-rooms-label task-label">Rooms: </div>
                        <span class="task-rooms-value task-field" contenteditable="true" data-task-id="0"
                            data-field-name="task_rooms">idk</span>
                    </div>
                </div>
            </div>
        </div><div class="col-lg-4 col-md-6 col-sm-12">
            <div class="card mb-3 shadow">
                <div class="card-header">
                    <span class="task-name" contenteditable="true">Lorem ipsum dolor sit amet, consectetur adipiscing
                        elit. Vestibulum facilisis dui in magna cursus, ut facilisis sem dapibus nam.</span>
                </div>
                <div class="card-body collapse show">
                    <div class="task-field-container">
                        <span class="task-description task-field" contenteditable="true" data-task-id="0"
                            data-field-name="task_description">Lorem ipsum dolor sit amet, consectetur adipiscing elit.
                            Suspendisse quis condimentum purus. Vivamus vulputate eu purus et porta. Nam eros mi,
                            consectetur id pretium id, pharetra vitae quam. Donec finibus libero magna, eget finibus ex
                            malesuada in. Praesent sed sagittis mauris. Vestibulum ultricies nisl vitae malesuada
                            sagittis. Sed urna sapien, tempus rutrum consectetur elementum, luctus a elit. Suspendisse
                            aliquet justo lorem, in faucibus leo tempor eget. Etiam fringilla sagittis ante ac
                            pellentesque nam.</span>
                    </div>

                    <div class="task-field-container">
                        <p class="task-status-label task-label">Status: </p>
                        <span class="task-status-value task-field" contenteditable="true" data-task-id="0"
                            data-field-name="task_status">sth</span>
                    </div>

                    <div class="task-field-container">
                        <div class="task-type-label task-label">Type: </div>
                        <span class="task-type-value task-field" contenteditable="true" data-task-id="0"
                            data-field-name="task_type">haha</span>
                    </div>

                    <div class="task-field-container">
                        <div class="task-category-label task-label">Category: </div>
                        <span class="task-category-value task-field" contenteditable="true" data-task-id="0"
                            data-field-name="task_category">single</span>
                    </div>

                    <div class="task-field-container">
                        <div class="task-due-date-label task-label">Due date: </div>
                        <span class="task-due-date-value task-field" contenteditable="true" data-task-id="0"
                            data-field-name="task_due_date">due date</span>
                    </div>

                    <div class="task-field-container">
                        <div class="task-creation-date-label task-label">Creation date: </div>
                        <span class="task-creation-date-value task-field" contenteditable="true" data-task-id="0"
                            data-field-name="task_creation_date"> due date</span>
                    </div>

                    <div class="task-field-container">
                        <div class="task-modified-date-label task-label">Modified date: </div>
                        <span class="task-modified-date-value task-field" contenteditable="true" data-task-id="0"
                            data-field-name="task_modified_date"> due date</span>
                    </div>

                    <div class="task-field-container">
                        <div class="task-completed-date-label task-label">Completed date: </div>
                        <span class="task-completed-date-value task-field" contenteditable="true" data-task-id="0"
                            data-field-name="task_completed_date"> asd</span>
                    </div>

                    <div class="task-field-container">
                        <div class="task-rooms-label task-label">Rooms: </div>
                        <span class="task-rooms-value task-field" contenteditable="true" data-task-id="0"
                            data-field-name="task_rooms">idk</span>
                    </div>
                </div>
            </div>
        </div><div class="col-lg-4 col-md-6 col-sm-12">
            <div class="card mb-3 shadow">
                <div class="card-header">
                    <span class="task-name" contenteditable="true">Lorem ipsum dolor sit amet, consectetur adipiscing
                        elit. Vestibulum facilisis dui in magna cursus, ut facilisis sem dapibus nam.</span>
                </div>
                <div class="card-body collapse show">
                    <div class="task-field-container">
                        <span class="task-description task-field" contenteditable="true" data-task-id="0"
                            data-field-name="task_description">Lorem ipsum dolor sit amet, consectetur adipiscing elit.
                            Suspendisse quis condimentum purus. Vivamus vulputate eu purus et porta. Nam eros mi,
                            consectetur id pretium id, pharetra vitae quam. Donec finibus libero magna, eget finibus ex
                            malesuada in. Praesent sed sagittis mauris. Vestibulum ultricies nisl vitae malesuada
                            sagittis. Sed urna sapien, tempus rutrum consectetur elementum, luctus a elit. Suspendisse
                            aliquet justo lorem, in faucibus leo tempor eget. Etiam fringilla sagittis ante ac
                            pellentesque nam.</span>
                    </div>

                    <div class="task-field-container">
                        <p class="task-status-label task-label">Status: </p>
                        <span class="task-status-value task-field" contenteditable="true" data-task-id="0"
                            data-field-name="task_status">sth</span>
                    </div>

                    <div class="task-field-container">
                        <div class="task-type-label task-label">Type: </div>
                        <span class="task-type-value task-field" contenteditable="true" data-task-id="0"
                            data-field-name="task_type">haha</span>
                    </div>

                    <div class="task-field-container">
                        <div class="task-category-label task-label">Category: </div>
                        <span class="task-category-value task-field" contenteditable="true" data-task-id="0"
                            data-field-name="task_category">single</span>
                    </div>

                    <div class="ttask-field-container">
                        <div class="task-due-date-label task-label">Due date: </div>
                        <span class="task-due-date-value task-field" contenteditable="true" data-task-id="0"
                            data-field-name="task_due_date">due date</span>
                    </div>

                    <div class="task-field-container">
                        <div class="task-creation-date-label task-label">Creation date: </div>
                        <span class="task-creation-date-value task-field" contenteditable="true" data-task-id="0"
                            data-field-name="task_creation_date"> due date</span>
                    </div>

                    <div class="task-field-container">
                        <div class="task-modified-date-label task-label">Modified date: </div>
                        <span class="task-modified-date-value task-field" contenteditable="true" data-task-id="0"
                            data-field-name="task_modified_date"> due date</span>
                    </div>

                    <div class="task-field-container">
                        <div class="task-completed-date-label task-label">Completed date: </div>
                        <span class="task-completed-date-value task-field" contenteditable="true" data-task-id="0"
                            data-field-name="task_completed_date"> asd</span>
                    </div>

                    <div class="task-field-container">
                        <div class="task-rooms-label task-label">Rooms: </div>
                        <span class="task-rooms-value task-field" contenteditable="true" data-task-id="0"
                            data-field-name="task_rooms">idk</span>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="row" id="done_tasks_holder"></div>
</div>

<template id="task-template">
    <div class="col-lg-4 col-md-6 col-sm-12">
        <div class="card mb-3 shadow">
            <div class="card-header">
                <span class="task-name"></span>
                <button class="btn btn-outline-secondary float-right expand-button">Expand</button>
            </div>
            <div class="card-body collapse">
                <div class="task-field-container">
                    <p class="task-description-label task-label">Description: </p>
                    <span class="task-description task-field" contenteditable="true" data-task-id="0"
                        data-field-name="task_description"></span>
                </div>

                <div class="task-field-container">
                    <p class="task-status-label task-label">Status: </p>
                    <span class="task-status-value task-field" contenteditable="true" data-task-id="0"
                        data-field-name="task_status"></span>
                </div>

                <div class="task-field-container">
                    <div class="task-type-label task-label">Type: </div>
                    <span class="task-type-value task-field" contenteditable="true" data-task-id="0"
                        data-field-name="task_type"></span>
                </div>

                <div class="task-field-container">
                    <div class="task-category-label task-label">Category: </div>
                    <span class="task-category-value task-field" contenteditable="true" data-task-id="0"
                        data-field-name="task_category"></span>
                </div>

                <div class="ttask-field-container">
                    <div class="task-due-date-label task-label">Due date: </div>
                    <span class="task-due-date-value task-field" contenteditable="true" data-task-id="0"
                        data-field-name="task_due_date"></span>
                </div>

                <div class="task-field-container">
                    <div class="task-creation-date-label task-label">Creation date: </div>
                    <span class="task-creation-date-value task-field" contenteditable="true" data-task-id="0"
                        data-field-name="task_creation_date"></span>
                </div>

                <div class="task-field-container">
                    <div class="task-modified-date-label task-label">Modified date: </div>
                    <span class="task-modified-date-value task-field" contenteditable="true" data-task-id="0"
                        data-field-name="task_modified_date"></span>
                </div>

                <div class="task-field-container">
                    <div class="task-completed-date-label task-label">Completed date: </div>
                    <span class="task-completed-date-value task-field" contenteditable="true" data-task-id="0"
                        data-field-name="task_completed_date"></span>
                </div>

                <div class="task-field-container">
                    <div class="task-rooms-label task-label">Rooms: </div>
                    <span class="task-rooms-value task-field" contenteditable="true" data-task-id="0"
                        data-field-name="task_rooms"></span>
                </div>
            </div>
            <div class="card-footer">
                <button class="btn btn-danger">Delete</button>
                <button class="btn btn-success">Mark as Done</button>
            </div>
        </div>
    </div>
</template>

<style>
    .task-field-container {
        display: flex;
    }

    .task-label {
        margin-right: 10px;
        font-weight: bold;
    }

    .card-header {
        font-weight: bold;
        font-size: 20px;
    }

    .card {
        transition: transform 0.4s ease-in-out;
    }

    .card:hover {
        transform: translateY(-3px);
    }
</style>

<script>
    document.addEventListener("DOMContentLoaded", function () {
        console.log("DOMContentLoaded");

        loadElements();
    });

    function loadElements() {
        loadPendingTasks();
        loadDoneTasks();
    }

    async function loadPendingTasks() {
        const pending_tasks = await fetchTasks(false); // Assuming false for pending
        //renderTasks(pending_tasks, "pending_tasks_holder");
    }

    async function loadDoneTasks() {
        const done_tasks = await fetchTasks(true); // Assuming true for completed
        //renderTasks(done_tasks, "done_tasks_holder");
    }

    function renderTasks(tasks, elementId) {
        const container = document.getElementById(elementId);
        const template = document.getElementById("task-template");
        const fragment = document.createDocumentFragment();

        tasks.forEach(task => {
            const taskCard = template.content.cloneNode(true);
            taskCard.querySelector(".task-name").textContent = task.name;
            taskCard.querySelector(".task-description").textContent = task.description;
            taskCard.querySelector(".task-status-value").textContent = task.status;
            taskCard.querySelector(".task-type-value").textContent = task.type;
            taskCard.querySelector(".task-category-value").textContent = task.category;
            taskCard.querySelector(".task-due-date-value").textContent = task.due_date ? task.due_date : 'N/A';
            taskCard.querySelector(".task-creation-date-value").textContent = task.creation_date;
            taskCard.querySelector(".task-modified-date-value").textContent = task.modified_date ? task.modified_date : 'N/A';
            taskCard.querySelector(".task-completed-date-value").textContent = task.completed_date ? task.completed_date : 'N/A';
            taskCard.querySelector(".task-rooms-value").textContent = Object.entries(task.rooms).map(([id, name]) => `${name} (ID: ${id})`).join(', ');

            // for each element with class task-field, set data task id attribute
            const taskFields = taskCard.querySelectorAll(".task-field");

            taskFields.forEach(taskField => {
                // set data-task-id attribute for the text field to be task.id
                taskField.setAttribute("data-task-id", task.id);
            });

            fragment.appendChild(taskCard);
        });

        container.appendChild(fragment);
    }

    function getRoomID() {
        var room_id_holder = document.getElementById("room_id_holder");
        var room_id = null;

        if (room_id_holder) {
            room_id = room_id_holder.getAttribute("room_id");
        }

        return room_id;
    }


    function getFloorID() {
        var floor_id_holder = document.getElementById("floor_id_holder")
        var floor_id = null;

        if (floor_id_holder) {
            floor_id = floor_id_holder.getAttribute("floor_id");
        }

        return floor_id;
    }

    function fetchTasks(completed = false) {
        let floor_id = getFloorID();
        let room_id = getRoomID();

        // Construct the URL with parameters
        let url = new URL(`/task/fetch_tasks`, window.location.origin); // Ensure URL is correctly pointed to your Django view URL

        if (floor_id) {
            url.searchParams.append('floor_id', floor_id);
        }

        if (room_id) {
            url.searchParams.append('room_id', room_id);
        }

        url.searchParams.append('completed', completed);

        console.log("Fetching tasks for", completed ? "completed" : "incomplete", "from", url);

        // Return the fetch promise
        return fetch(url)
            .then(response => {
                if (!response.ok) {
                    throw new Error('Network response was not ok');
                }
                return response.json();
            })
            .then(tasks => {
                console.log('Tasks:', tasks);
                return tasks;
            })
            .catch(error => {
                console.error('Failed to fetch tasks:', error);
                return [];
            });
    }
</script>